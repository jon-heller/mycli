#! /bin/bash

if [ $# -lt 1 ]
then
        echo "mycli <command>"
        echo
        echo "Commands:"
        echo
        echo "create -- create new database and, optionally, database user"
        exit
fi

mysqlLogin=""
mysqlPassword=""

if [ -z "$mysqlLogin" ]; then
    read -p "MySQL Login: " mysqlLogin    
fi
if [ -z "$mysqlPassword" ]; then
    read -p "MySQL Password: " mysqlPassword
fi

case "$1" in
'create')
    read -p "Database name: " dbName
    mysql --user="$mysqlLogin" --password="$mysqlPassword" --execute="CREATE DATABASE $dbName;"
    read -p "Database user [press enter for none]: " dbUser
    if [ ! -z "$dbUser" ]; then
        read -p "Database user password: " dbPass
        mysql --user="$mysqlLogin" --password="$mysqlPassword" --execute="CREATE USER '$dbUser'@'localhost' IDENTIFIED BY '$dbPass'; GRANT ALL PRIVILEGES ON $dbName.* TO '$dbUser'@'localhost'; FLUSH PRIVILEGES;";
    fi
;;
esac